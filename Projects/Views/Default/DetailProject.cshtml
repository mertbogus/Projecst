@model ProjectNewListModel

@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_UILayout.cshtml";
}
<script src="https://code.jquery.com/jquery-3.6.0.min.js" ></script>

<!DOCTYPE html>
<html lang="en">

@await Html.PartialAsync("/Views/LayoutPartial/_HeadPartial.cshtml")
<body class="body-green">
    <div class="page-wrapper">
        <!-- ******Header****** -->
        <header id="header" class="header">
            <div class="container">
                <div class="branding">
                    <h1 class="logo">
                        <a href="index.html">
                            <span aria-hidden="true" class="icon_documents_alt icon"></span>
                            <span class="text-highlight">Online</span><span class="text-bold">Döküman</span>
                        </a>
                    </h1>


                </div><!--//branding-->

                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/Default/Index">Anasayfa</a></li>>
                </ol>
            </div><!--//container-->
        </header><!--//header-->
        <div class="doc-wrapper">
            <div class="container">
                <div class="doc-body row">
                    <div class="doc-content col-md-9 col-12 order-1">
                        <div class="content-inner">
                           
                            <section id="installation-section-doldur" class="doc-section">
                               
                            </section>
                            <section id="installation-section" class="doc-section">
                            </section>
                            <section id="installation-section" class="doc-section">
                            </section>
                            <section id="installation-section" class="doc-section">
                            </section>

                        </div><!--//content-inner-->
                    </div><!--//doc-content-->

                    <div class="doc-sidebar col-md-3 col-12 order-0 d-none d-md-flex">
                        <div id="doc-nav" class="doc-nav">
                            <nav id="doc-menu" class="nav doc-menu flex-column sticky">
                                @foreach (var x in Model.Sections)
                                {
                                    <li class="nav-item">
                                        <a class="nav-link scrollto" href="#section-@x.Id" data-bs-toggle="collapse" aria-expanded="false" aria-controls="section-@x.Id">@x.Name</a>
                                        <div id="section-@x.Id" class="collapse" data-bs-parent="#doc-menu">
                                            <nav class="nav doc-sub-menu nav flex-column">
                                                @foreach (var item in x.SectionDetails)
                                                {
                                        <li class="nav-item">
                                            <a class="nav-link scrollto bass" ids="@item.Id" href="#detail-@item.Id">@item.Name</a>
                                        </li>
                                                }
                                </nav>
                            </div>
                            </li>
                                }
                        </nav><!--//doc-menu-->
                    </div>
                </div><!--//doc-sidebar-->

                </div><!--//doc-body-->
            </div><!--//container-->
        </div><!--//doc-wrapper-->
    </div><!--//page-wrapper-->
    <script>
        $(document).ready(function () {
            $(".nav-link.bass").on("click", function (event) {
                event.preventDefault();

                var id = $(this).attr("ids");
                debugger;
                $.ajax({
                    url: '@Url.Action("GetSectionDetailById", "Default", new { area = "" })',
                    type: 'GET',
                    data: { id: id },
                    success: function (data) {
                        
                        var content = `
                                <h2 class="section-title">${data.name}</h2>
                                <div id="step${data.id}" class="section-block">
                                    <h3 class="block-title">${data.name}</h3>
                                    <p>${data.desc}</p>
                                </div>
                            `;
                        $("#installation-section-doldur").html(content);
                    },
                    error: function (xhr, status, error) {
                        console.error("Veri yüklenemedi: ", status, error);
                    }
                });
            });
        });
    </script>

    <script>
        // İsteğe bağlı: Eğer jQuery kullanıyorsanız ve daha fazla özelleştirme yapmak istiyorsanız
        $(document).ready(function () {
            $('#doc-menu .nav-link[data-bs-toggle="collapse"]').on('click', function (e) {
                $('#doc-menu .collapse.show').collapse('hide');
            });
        });
        document.addEventListener("DOMContentLoaded", function () {
            // Başlangıçta tüm section-block'ları gizle
            document.querySelectorAll(".section-block").forEach(block => block.style.display = 'none');

            // Eğer URL'de bir hash varsa, o bölümü göster
            if (window.location.hash) {
                var target = document.querySelector(window.location.hash);
                if (target) {
                    target.style.display = 'block';
                }
            }

            // Tıklanan bağlantının içeriğini göster
            document.querySelectorAll(".nav-link.scrollto").forEach(link => {
                link.addEventListener("click", function (event) {
                    event.preventDefault();

                    var sectionId = this.getAttribute("data-section-id");
                    var detailId = this.getAttribute("data-detail-id");

                    // Tüm section-block'ları gizle
                    document.querySelectorAll("#" + sectionId + " .section-block").forEach(block => block.style.display = 'none');

                    // Tıklanan detail'ı göster
                    var detail = document.getElementById(detailId);
                    if (detail) {
                        detail.style.display = 'block';
                        detail.scrollIntoView({ behavior: 'smooth' });
                    }
                });
            });
        });

    </script>

    <footer id="footer" class="footer text-center">
        <div class="container">
            <!--/* This template is free as long as you keep the footer attribution link. If you'd like to use the template without the attribution link, you can buy the commercial license via our website: themes.3rdwavemedia.com Thank you for your support. :) */-->
            <small class="copyright">Designed with <span class="sr-only">love</span><i class="fas fa-heart"></i> by <a href="https://themes.3rdwavemedia.com/" target="_blank">Xiaoying Riley</a> for developers</small>

        </div><!--//container-->
    </footer><!--//footer-->
    <!-- Main Javascript -->
    @await Html.PartialAsync("/Views/LayoutPartial/_ScriptsPartial.cshtml")
</body>
</html>



